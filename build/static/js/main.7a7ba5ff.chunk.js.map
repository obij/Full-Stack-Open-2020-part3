{"version":3,"sources":["components/Input.js","components/Filter.js","components/PersonForm.js","components/Button.js","components/Person.js","components/Persons.js","services/notes.js","components/Notification.js","components/ErrorNotification.js","components/App.js","index.js"],"names":["Input","text","value","onChange","Filter","PersonForm","addName","text1","value1","onChange1","text2","value2","onChange2","onSubmit","type","Button","deletePersonObject","personId","personName","onClick","Person","person","name","number","id","Persons","filteredNameArr","persons","filteredName","map","baseUrl","axios","get","then","response","data","newObject","post","delObject","delete","put","Notification","message","className","ErrorNotification","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilteredName","notification","setNotification","errorMessage","setErrorMessage","useEffect","noteService","initialPersons","filter","r","toUpperCase","RegExp","test","event","target","preventDefault","nameObject","arr","obj","found","i","length","containsObj","alert","containsObjWithDiffNo","window","confirm","samePersonWithDiffNo","find","p","changedPerson","returnedPerson","setTimeout","catch","error","n","concat","deletedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7a7ba5ff.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Input = ({text, value, onChange}) => {\r\n  return (\r\n    <div>\r\n      {text} <input value= {value} onChange= {onChange} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Input\r\n","import React from 'react'\r\nimport Input from '../components/Input'\r\n\r\nconst Filter = ({text, value, onChange}) => {\r\n  return (\r\n    <div>\r\n      <Input text= {text} value= {value} onChange= {onChange} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter\r\n","import React from 'react'\r\nimport Input from '../components/Input'\r\n\r\nconst PersonForm = ({addName, text1, value1, onChange1, text2, value2, onChange2}) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit= {addName}>\r\n          <Input text= {text1} value= {value1} onChange= {onChange1} />\r\n          <Input text= {text2} value= {value2} onChange= {onChange2} />\r\n          <div><button type=\"submit\">add</button></div>\r\n      </form>\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PersonForm\r\n","import React from 'react'\r\n\r\nconst Button = ({deletePersonObject, personId, personName}) => {\r\n    return (\r\n        <div>\r\n           <button onClick = {() => deletePersonObject(personId, personName)}>delete</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Button\r\n","import React from 'react'\r\nimport Button from './Button'\r\n\r\nconst Person = ({person, deletePersonObject}) => <li>{person.name} {person.number}<Button deletePersonObject= {deletePersonObject} personId= {person.id} personName= {person.name} /></li>\r\n\r\nexport default Person\r\n","import React from 'react'\r\nimport Person from '../components/Person'\r\n\r\nconst Persons = ({filteredNameArr, persons, filteredName, deletePersonObject}) => {\r\n    return (\r\n        <div>\r\n            <ul>\r\n               { filteredName === \"\"\r\n                 ? persons.map(person => <Person key= {person.name} person= {person} deletePersonObject= {deletePersonObject} />)\r\n                 : filteredNameArr.map(person => <Person key= {person.name} person= {person} deletePersonObject= {deletePersonObject} />)\r\n               }\r\n        \r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons\r\n","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n//const baseUrl= 'http://localhost:3001/api/persons'\r\n//const baseUrl= 'https://morning-earth-10869.herokuapp.com/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create= newObject => {\r\n    const request= axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst updateDelete = (id, delObject) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`, delObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update= (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\n\r\nexport default {getAll, create, updateDelete, update}","import React from 'react'\r\n\r\nconst Notification = ({message}) => {\r\n    if (message === null){\r\n        return null\r\n    }\r\n    return (\r\n        <div className= \"notification\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification\r\n","import React from 'react'\r\n\r\nconst ErrorNotification = ({message}) => {\r\n    if(message === null){\r\n        return null;\r\n    }\r\n    return (\r\n        <div className= \"error\">\r\n           {message} \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ErrorNotification\r\n","import React, { useState, useEffect } from 'react'\r\nimport Filter from '../components/Filter'\r\nimport PersonForm from '../components/PersonForm'\r\nimport Persons from '../components/Persons'\r\nimport noteService from '../services/notes'\r\nimport Notification from '../components/Notification'\r\nimport ErrorNotification from './ErrorNotification'\r\n\r\n\r\n\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([]) \r\n  const [ newName, setNewName ] = useState(\"\")\r\n  const [newNumber, setNewNumber] = useState(\"\")\r\n  const [filteredName, setFilteredName]= useState(\"\");\r\n  const [notification, setNotification] = useState(\"\")\r\n  const [errorMessage, setErrorMessage]= useState(\"\")\r\n  \r\n  useEffect(() =>{\r\n      //console.log('effect')\r\n      noteService\r\n          .getAll()\r\n          .then(initialPersons => {\r\n              //console.log('promise fulfilled');\r\n              setPersons(initialPersons)\r\n          })\r\n  }, [])\r\n  //console.log('render', persons.length, 'persons');\r\n\r\n  const filteredNameArr = persons.filter(person => {\r\n      let r= \"^\";\r\n      r += filteredName.toUpperCase();\r\n      let reg = new RegExp(r);\r\n      return reg.test(person.name.toUpperCase());\r\n  })\r\n\r\n  const handleNameFilter = (event) => {\r\n      setFilteredName(event.target.value);\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n      //console.log(event.target.value);\r\n      setNewNumber(event.target.value);\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n      //console.log(event.target.value);\r\n      setNewName(event.target.value);\r\n  }\r\n\r\n  const containsObj =(arr, obj) => {\r\n      let found = false;\r\n      for(let i= 0; i < arr.length; i++){\r\n          if(arr[i].name === obj.name && arr[i].number === obj.number){\r\n              found = true;\r\n              return found;\r\n          }\r\n      }\r\n      return found;\r\n  }\r\n\r\n  const containsObjWithDiffNo =(arr, obj) => {\r\n    let found = false;\r\n    for(let i= 0; i < arr.length; i++){\r\n        if(arr[i].name === obj.name && arr[i].number !== obj.number){\r\n            found = true;\r\n            return found;\r\n        }\r\n    }\r\n    return found;\r\n}\r\n\r\n\r\n  const addName = (event) => {\r\n      event.preventDefault();\r\n      const nameObject = {\r\n          name: newName,\r\n          number: newNumber\r\n      }\r\n\r\n     if(containsObj(persons, nameObject)){\r\n          //console.log(\"includes object\");\r\n          alert(`${newName} with number ${newNumber}  already added to phonebook`)\r\n\r\n     }else if(containsObjWithDiffNo(persons, nameObject)){\r\n        if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\r\n            const samePersonWithDiffNo=  persons.find(p => p.name === nameObject.name && p.number !== nameObject.number);\r\n            const changedPerson = {...samePersonWithDiffNo, number: nameObject.number};\r\n            noteService\r\n                .update(samePersonWithDiffNo.id, changedPerson)\r\n                .then(returnedPerson => {\r\n                    setPersons(persons.map(person => \r\n                       person.id !== samePersonWithDiffNo.id ? person : returnedPerson))\r\n                    setNotification(`'${returnedPerson.number}' was successfully updated for Person  '${returnedPerson.name}'`)\r\n                    setTimeout(() => {\r\n                        setNotification(null)\r\n                    }, 5000)   \r\n                })\r\n                .catch(error => {\r\n                    alert(`The person ${samePersonWithDiffNo.name}' was already deleted from server`)\r\n                    setPersons(persons.filter(n =>\r\n                       n.id !== samePersonWithDiffNo.id))\r\n                })\r\n        }\r\n\r\n      }else{\r\n         // setPersons(persons.concat(nameObject));\r\n         noteService\r\n         .create(nameObject)\r\n         .then(returnedPerson => {\r\n             setPersons(persons.concat(returnedPerson));\r\n             setNotification(`Person '${returnedPerson.name}' was successfully added to phonebook`)\r\n             setTimeout(() => {\r\n                 setNotification(null)\r\n             }, 5000)\r\n         })\r\n     }\r\n      setNewName(\"\");\r\n      setNewNumber(\"\");\r\n      setFilteredName(\"\")\r\n  }\r\n\r\n  const deletePersonObject = (id, name) => {\r\n      if(window.confirm(`Delete ${name}`)){\r\n          const deletedPerson = persons.find(p => p.id=== id)\r\n\r\n          noteService\r\n             .updateDelete(id, deletedPerson)\r\n             .then(returnedPerson => {\r\n                 setPersons(persons.filter (person => person.id !== returnedPerson.id))\r\n             })\r\n             .catch(error => {\r\n                 setErrorMessage(`Information of '${deletedPerson.name}' has already been removed from server`)\r\n                 setTimeout(() => {\r\n                    setErrorMessage(null)\r\n                }, 5000)\r\n                setPersons(persons.filter(n => n.id !== deletedPerson.id))\r\n             })\r\n      }\r\n  }\r\n \r\n  //console.log(filteredNameArr);\r\n\r\n \r\n return(\r\n     <div>\r\n         <h2>Phonebook</h2>\r\n         <Notification message= {notification} />\r\n         <ErrorNotification message= {errorMessage} />\r\n         <Filter text= \"Filter names with: \" value= {filteredName} onChange= {handleNameFilter} />\r\n         <h3>Add a new</h3>\r\n         <PersonForm addName= {addName} text1= \"name: \" value1= {newName} onChange1= {handleNameChange} text2= \"number: \" value2= {newNumber} onChange2= {handleNumberChange} />\r\n         <h3>Numbers</h3>\r\n         <Persons filteredNameArr= {filteredNameArr} persons= {persons} filteredName= {filteredName} deletePersonObject ={deletePersonObject}/>\r\n     </div>\r\n\r\n )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App'\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n"],"sourceRoot":""}